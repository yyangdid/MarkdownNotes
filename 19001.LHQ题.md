# LHQ 面试题

## 判断并说明为什么 _(LHQ 25.2)_

- 代码：

  ```c
  // 把一个字符串常量赋值给一个字符指针
  char *ptr = "abc";
  // 通过 ptr 把第零个字符修改为 'x'
  ptr[0]    = 'x';
  // 问：能不能得到一个字符串 "xbc"?
  ```

- 答：在 Linux 下用 Gcc 编译会报错，指针 ptr 指向的是字符串常量，不可能修改一个常量的内容。
  但是具体要看编译环境，比如在 Windows 下使用 Turbo C 编译器可能会得到想要的结果。

## 如何使一个程序变快？ _(LHQ 26.4)_

- 答：分两种情况
  - 响应速度变快
    - 多使用 `sysio`
  - 吞吐量变大（用户体验好）
    - 多使用 `stdio`

## 写程序删除一个文件的第 10 行 _(LHQ 26.5)_

## 命令行创建和删除一个名字为 `-a` 的文件 _(LHQ 27.1)_

- 方法一:
  - 当命令遇到 `--` 表示对当前命令的选项结束, 后面再跟什么都不作为命令选项.
  - 使用 `touch -- -a` 即可创建名字为 `-a` 的文件.
  - 使用 `rm -- -a` 即可删除名字为 `-a` 的文件.
- 方法二:
  - 把路径写上, 那么这个 `-a` 就不会被当做命令选项了.
  - 即: `touch ./-a` 和 `rm ./-a`

## 判断程序结束时给父进程的返回值 _(LHQ 28.11)_

- 代码:

  ```c
  #include <stdio.h>

  int main() {
    printf("hello!\n");

    // return 0; // 主函数没有返回值, 该进程会给其父进程什么返回值
  }
  ```

- 答: 假设该程序是从 shell 启动的, 那么该程序进程结束时给 shell 的返回值为 7(hello\n\0). 因为
  `main()` 函数如果没有返回值语句, 那么该函数内执行的最后一个语句的返回值作为整个 `main()` 函数的返
  回值.

## `fork(2)` 程序中的输出语句为什么会打印两次 _(LHQ 29.2)_

- [示例: fork(2) 的使用 v1](./15120.进程基础.md#fork2-lhq-291)
- 原题是输出代码中没有换行的那种情况.
- [exec(3) 函数族](./15120.进程基础.md#exec3-函数族-lhq-297) 也有类似情况.

## 线程互斥量的使用 _(LHQ 31.8)_

- 有四个线程, 这四个线程拼命的分别向终端输出a、b、c、d, 即: 线程 1 输出 a, 线程 2 输出 b, 线程 3 输
  出 c, 线程 4 输出 d.
- 程序原型为: [示例: 线程互斥量的使用 v1](./Atta/code/1128-abcd/README.md#v1) _(LHQ 31.8)_
- 要求修改输出为工整的 abcdabcd...
- 答案:
  - 不是很标准的答案, 暂时只能这么写(锁链盲等版) [示例: 线程互斥量的使用 v2](./Atta/code/1128-abcd/README.md#v2) _(LHQ 31.8)_
  - 通知法非盲等版 [示例: 线程互斥量的使用 v3](./Atta/code/1128-abcd/README.md#v3) _(LHQ 31.13)_
