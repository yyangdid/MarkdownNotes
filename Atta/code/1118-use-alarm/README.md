# alarm(2) 函数的使用

## v1

- 代码文件：
  - [main.c](./v1/main.c)

- 说明：
  - 未使用 `alarm(2)`, 使用的 `time(2)`, 最多会有 1 秒的误差.
  - 定时循环, 对一个数进行累加, 就是在几秒钟时间里疯狂的累加.
  - 运行 `./main`. 用 `time ./main` 运行几次, 查看输出.

- 知识点:
  - `time(2)`

- 资料:
  - _(LHQ 30.7)_

## v2

- 代码文件：
  - [main.c](./v2/main.c)

- 说明：
  - 使用 `alarm(2)`
  - 定时循环, 对一个数进行累加, 就是在几秒钟时间里疯狂的累加, 时间误差小.
  - 运行 `./main`. 用 `time ./main` 运行几次, 查看输出并和 [v1](#v1) 进行比较.
  - 如果在编译时使用了编译优化, 那么该程序会一直运行, 停不下来了. (可以使用 `gcc -S ./main.c` 和
    `gcc -S ./main.c -O1`生成汇编文件, 对比两个汇编文件)

- 知识点:
  - `alarm(2)`
  - `signal(2)`
  - `volatile` 关键字, 表示去变量真正的空间去取值.
  - `signal(2)` 一定要写在 `alarm(2)` 前面 _(LHQ 30.8)_

- 资料:
  - _(LHQ 30.7)_
