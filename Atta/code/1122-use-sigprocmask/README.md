# sigprocmask(2) 函数的使用

## v1

- 代码文件：
  - [main.c](./v1/main.c)

- 说明：
  - 修改自 [signal(2) 函数的使用 v1](../1117-use-signal/README.md#v1)
  - 每秒向终端打印一个星号, 每行打印五个, 在一行未打印完成时收到的信号暂时不响应, 待打印完成一整行后
    再对信号作出反应.
  - 运行: `./main`, 按 Ctrl+c 只有回显没有响应, 在下一行开始时响应, 连续按多次只会响应一次.
  - 最好把程序当做一个模块, 在进入模块时保存信号状态, 退出模块时恢复信号状态, 见 [v3](#v3).

- 知识点:
  - `sigprocmask(2)`
  - `sigset_t` : 信号集类型.
  - `sigemptyset(3)`
  - `sigaddset(3)`

- 资料:
  - _(LHQ 30.15)_

## v2

- 代码文件：
  - [main.c](./v2/main.c)

- 说明：
  - 写法二
  - 效果同 `[v1](#v1)
  - 最好把程序当做一个模块, 在进入模块时保存信号状态, 退出模块时恢复信号状态, 见 [v4](#v4).

- 资料:
  - _(LHQ 30.15)_

## v3

- 代码文件：
  - [main.c](./v3/main.c)

- 说明：
  - 为 `[v1](#v1) 增加保存和恢复信号状态

- 资料:
  - _(LHQ 30.15)_

## v4

- 代码文件：
  - [main.c](./v4/main.c)

- 说明：
  - 为 `[v2](#v2) 增加保存和恢复信号状态

- 资料:
  - _(LHQ 30.15)_
